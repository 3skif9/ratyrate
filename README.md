# RatyRate Stars Rating Gem [![endorse](http://api.coderwall.com/wazery/endorsecount.png)](http://coderwall.com/wazery)

A Ruby Gem that provides the same functionality of jQuery Raty library, and adds IMDB style rating.

[![Gem Version](https://badge.fury.io/rb/money-rails.png)](http://badge.fury.io/rb/money-rails)
[![Build Status](https://secure.travis-ci.org/wazery/letsrate.png)](http://travis-ci.org/wazery/letsrate)
[![Dependency Status](https://gemnasium.com/wazery/letsrate.svg)](https://gemnasium.com/wazery/letsrate)
[![Code Climate](https://codeclimate.com/github/wazery/letsrate.png)](https://codeclimate.com/github/wazery/letsrate)
[![License](http://img.shields.io/license/MIT.png?color=green)](http://opensource.org/licenses/MIT)
[![Support jQuery Raty](http://img.shields.io/gittip/wbotelhos.svg)](https://www.gittip.com/wazery "Git Tip")

## Repository

This is a fork from the repository [muratguzel/letsrate](https://github.com/muratguzel/letsrate), the aim of this fork is to refresh the development in this Gem, so please if you have any pull request issue it here.

## Changelog from the main repository
```
1. Some feature
2.
3.
```
## Instructions

### Install

Add the letsrate gem into your Gemfile

```ruby
gem 'letsrate'
```

### Generate

```
rails g letsrate User
```

The generator takes one argument which is the name of your existing devise user model UserModelName. This is necessary to bind the user and rating datas.
Also the generator copies necessary files (jquery raty plugin files, star icons and javascripts)

Example:

Suppose you will have a devise user model which name is User. The devise generator and letsrate generator should be like below

```
rails g devise:install
rails g devise user

rails g letsrate user # => user is the model generated by devise
```

This generator will create Rate and RatingCache models and link to your user model.

### Prepare

I suppose you have a car model

```
rails g model car name:string
```

You should add the letsrate_rateable function with its dimensions option. You can add multiple dimensions.

```ruby
class Car < ActiveRecord::Base
  letsrate_rateable "speed", "engine", "price"
end
```

Then you need to add a call letsrate_rater in the user model.

```ruby
class User < ActiveRecord::Base
  letsrate_rater
end
```

### Using

There is a helper method which name is rating_for to add the star links. By default rating_for will display the average rating and accept the
new rating value from authenticated user.

```erb
<%# show.html.erb -> /cars/1 %>

Speed : <%= rating_for @car, "speed" %>
Engine : <%= rating_for @car, "engine" %>
Price : <%= rating_for @car, "price" %>
```

If you need to change the star number, you should use star option like below.

```erb
Speed : <%= rating_for @car, "speed", :star => 10 %>
Speed : <%= rating_for @car, "engine", :star => 7 %>
Speed : <%= rating_for @car, "price" %>
```

You can use the rating_for_user helper method to show the star rating for the user.

```erb
Speed : <%= rating_for_user @car, current_user, "speed", :star => 10 %>
```

## Feedback
If you find bugs please open a ticket at [https://github.com/wazery/letsrate/issues](https://github.com/wazery/letsrate/issues)
